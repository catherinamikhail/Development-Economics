---
title: "Data_assignment2"
author: "Catherina Mikhail 2847118, Sinem Göral 2817932, Ela Köycü 2846357"
date: "2025-11-14"
output: word_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
load("~/GitHub/Development-Economics/data assignment 2/Tanzania_2018_new-1_fixed.rdata")
tzdata <-Tanzania_2018_new
  
```

```{r exercise 2}
# Creating a variable called "poor", where if consumption is equal or lower than the poverty line it will give a 1 and if it is higher it will give a zero (those are considered not poor).
tzdata$poor <- ifelse(tzdata$cons <= tzdata$povline, 1, 0)
```


```{r exercise 3}
### Females 7–12
f_7_12 <- tzdata %>%
  filter(age >= 7 & age <= 12,
         male == 0,
         poor == 1)

f_7_12_pct <- f_7_12 %>%
  group_by(LOC) %>%
  summarise(pct_in_school = 100 * sum(popweight * inschool) / sum(popweight))



### Females 13–18
f_13_18 <- tzdata %>%
  filter(age >= 13 & age <= 18,
         male == 0,
         poor == 1)

f_13_18_pct <- f_13_18 %>%
  group_by(LOC) %>%
  summarise(pct_in_school = 100 * sum(popweight * inschool) / sum(popweight))



### Males 7–12
m_7_12 <- tzdata %>%
  filter(age >= 7 & age <= 12,
         male == 1,
         poor == 1)

m_7_12_pct <- m_7_12 %>%
  group_by(LOC) %>%
  summarise(pct_in_school = 100 * sum(popweight * inschool) / sum(popweight))



### Males 13–18
m_13_18 <- tzdata %>%
  filter(age >= 13 & age <= 18,
         male == 1,
         poor == 1)

m_13_18_pct <- m_13_18 %>%
  group_by(LOC) %>%
  summarise(pct_in_school = 100 * sum(popweight * inschool) / sum(popweight))


## Now we arrange it into a neat table.
# Round each percentage to 1 decimal.
f_7_12_pct <- f_7_12_pct %>% mutate(Female_7_12 = round(pct_in_school, 1)) %>% select(LOC, Female_7_12)
f_13_18_pct <- f_13_18_pct %>% mutate(Female_13_18 = round(pct_in_school, 1)) %>% select(LOC, Female_13_18)
m_7_12_pct <- m_7_12_pct %>% mutate(Male_7_12 = round(pct_in_school, 1)) %>% select(LOC, Male_7_12)
m_13_18_pct <- m_13_18_pct %>% mutate(Male_13_18 = round(pct_in_school, 1)) %>% select(LOC, Male_13_18)

# Combine into one table.
combined_pct <- f_7_12_pct %>%
  left_join(f_13_18_pct, by = "LOC") %>%
  left_join(m_7_12_pct, by = "LOC") %>%
  left_join(m_13_18_pct, by = "LOC")

print(combined_pct)

```


```{r exercise 5}
tzdata %>%
  group_by(freebooks) %>%
  summarise(enrollment_rate = weighted.mean(inschool_later, popweight, na.rm = TRUE) * 100)

```

